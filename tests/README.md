# Тесты для DevDataSorter

Этот каталог содержит тесты для проверки функциональности бота DevDataSorter, который классифицирует и сортирует сообщения по категориям.

## Структура тестов

- `test_classifier.py` - тесты для класса ContentClassifier, который отвечает за классификацию контента
- `test_message_sorter.py` - тесты для класса MessageSorter, который сортирует сообщения на основе классификации
- `test_integration.py` - интеграционные тесты, проверяющие работу всех компонентов вместе
- `test_data.json` - тестовые данные для различных категорий контента
- `run_tests.py` - скрипт для запуска всех тестов

## Запуск тестов

Для запуска всех тестов выполните:

```bash
python tests/run_tests.py
```

Для запуска отдельного теста:

```bash
python -m unittest tests/test_classifier.py
```

## Тестовые данные

Файл `test_data.json` содержит примеры различных типов контента для тестирования классификации:

- Примеры кода на разных языках программирования
- Туториалы и руководства
- Документация API и библиотек
- Ссылки на видео
- Прочие сообщения

## Мокирование API OpenAI

Тесты используют `unittest.mock` для мокирования вызовов к API OpenAI, чтобы не делать реальные запросы во время тестирования. Это позволяет:

1. Ускорить выполнение тестов
2. Избежать расходов на API
3. Обеспечить стабильность тестов независимо от доступности API

## Добавление новых тестов

При добавлении новой функциональности в бота, рекомендуется также добавлять соответствующие тесты. Для этого:

1. Создайте новый тестовый файл или добавьте тестовые методы в существующие файлы
2. При необходимости добавьте новые тестовые данные в `test_data.json`
3. Убедитесь, что все тесты проходят успешно

## Интеграционное тестирование

Интеграционные тесты в `test_integration.py` проверяют работу всей системы в целом, от получения сообщения до его классификации и отправки ответа. Они используют мокирование для имитации внешних зависимостей, таких как API OpenAI и Telegram Bot API.